import{J as Q,K as D,L as X,y as P,M as I,N as Y,I as Z,O as L,P as x,T as j,Q as ee,R as te,f as re,g as ne,r as oe,o as se,v as ie,h as F,_ as ae}from"./BtuYihO7.js";import{p as C,k as M,f as ue,h as le}from"./BgQvrkpX.js";function ce(e){return{type:"root",children:e.value.map(k)}}function k(e){if(typeof e=="string")return{type:"text",value:e};const[r,t,...o]=e;return{type:"element",tag:r,props:t,children:o.map(k)}}const T=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],pe=["p","h1","h2","h3","h4","h5","h6","li"];function O(e,r){return e.type===r||typeof e.type=="object"&&e.type.tag===r||e.tag===r}function R(e){return O(e,"text")||O(e,Symbol.for("v-txt"))}function H(e){var r;return Array.isArray(e.children)||typeof e.children=="string"?e.children:typeof((r=e.children)==null?void 0:r.default)=="function"?e.children.default():[]}function S(e){if(!e)return"";if(Array.isArray(e))return e.map(S).join("");if(R(e))return e.value||e.children||"";const r=H(e);return Array.isArray(r)?r.map(S).filter(Boolean).join(""):""}function N(e,r=[]){if(Array.isArray(e))return e.flatMap(o=>N(o,r));let t=e;return r.some(o=>o==="*"||O(e,o))&&(t=H(e)||e,!Array.isArray(t)&&pe.some(o=>O(e,o))&&(t=[t])),t}function E(e,r=[]){return e=Array.isArray(e)?e:[e],r.length?e.flatMap(t=>E(N(t,[r[0]]),r.slice(1))).filter(t=>!(R(t)&&S(t).trim()==="")):e}function q(e,r=[]){return typeof r=="string"&&(r=r.split(/[,\s]/).map(t=>t.trim()).filter(Boolean)),r.length?E(e,r).reduce((t,o)=>(R(o)?typeof t[t.length-1]=="string"?t[t.length-1]+=o.children:t.push(o.children):t.push(o),t),[]):e}function fe(e,r){return r.reduce((t,o)=>{const n=de(e,o);return n!==void 0&&(t[o]=n),t},{})}function de(e,r){return r.split(".").reduce((t,o)=>t&&t[o],e)}const A="default",$=/^@|^v-on:/,U=/^:|^v-bind:/,me=/^v-model/,ye=["select","textarea","input"],he=["math","svg"],ge=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(e=>[e,`prose-${e}`])),be=Q({name:"MDCRenderer",props:{body:{type:Object,required:!0},data:{type:Object,default:()=>({})},class:{type:[String,Object],default:void 0},tag:{type:[String,Boolean],default:void 0},prose:{type:Boolean,default:void 0},components:{type:Object,default:()=>({})},unwrap:{type:[Boolean,String],default:!1}},async setup(e){var u,l,c;const r=(l=(u=X())==null?void 0:u.appContext)==null?void 0:l.app,t=r==null?void 0:r.$nuxt,o=(t==null?void 0:t.$route)||(t==null?void 0:t._route),{mdc:n}=((c=t==null?void 0:t.$config)==null?void 0:c.public)||{},i=P(()=>{var f,b,g,s;return{...(f=n==null?void 0:n.components)!=null&&f.prose&&e.prose!==!1?ge:{},...((b=n==null?void 0:n.components)==null?void 0:b.map)||{},...I(((s=(g=e.data)==null?void 0:g.mdc)==null?void 0:s.components)||{}),...e.components}}),y=P(()=>{var b;const f=(((b=e.body)==null?void 0:b.children)||[]).map(g=>g.tag||g.type).filter(g=>!T.includes(g));return Array.from(new Set(f)).sort().join(".")}),m=Y({...e.data});Z(()=>e.data,f=>{Object.assign(m,f)}),await Ae(e.body,{tags:i.value});function p(f,b){const g=f.split(".").length-1;return f.split(".").reduce((s,a,d)=>d==g&&s?(s[a]=b,s[a]):typeof s=="object"?s[a]:void 0,m)}return{tags:i,contentKey:y,route:o,runtimeData:m,updateRuntimeData:p}},render(e){var b,g;const{tags:r,tag:t,body:o,data:n,contentKey:i,route:y,unwrap:m,runtimeData:p,updateRuntimeData:u}=e;if(!o)return null;const l={...n,tags:r,$route:y,runtimeData:p,updateRuntimeData:u},c=t!==!1?B(t||((b=l.component)==null?void 0:b.name)||l.component||"div"):void 0;return c?D(c,{...(g=l.component)==null?void 0:g.props,class:e.class,...this.$attrs,key:i},{default:f}):f==null?void 0:f();function f(){const s=V(o,D,{documentMeta:l,parentScope:l,resolveComponent:B});return s!=null&&s.default?m?q(s.default(),typeof m=="string"?m.split(" "):["*"]):s.default():null}}});function ve(e,r,t,o){const{documentMeta:n,parentScope:i,resolveComponent:y}=t;if(e.type==="text")return r(j,e.value);if(e.type==="comment")return r(ee,null,e.value);const m=e.tag,p=W(e,n.tags);if(e.tag==="binding")return _e(e,r,n,i);const u=K(p)?f=>f:y;if(p==="script")return r("pre",{class:"script-to-pre"},`<script>
`+S(e)+`
<\/script>`);const l=u(p);typeof l=="object"&&(l.tag=m);const c=Pe(e,n);return o&&(c.key=o),r(l,c,V(e,r,{documentMeta:n,parentScope:{...i,...c},resolveComponent:u}))}function V(e,r,t){const{documentMeta:o,parentScope:n,resolveComponent:i}=t,m=(e.children||[]).reduce((u,l)=>{if(!we(l))return u[A].children.push(l),u;const c=Se(l);return u[c]=u[c]||{props:{},children:[]},l.type==="element"&&(u[c].props=l.props,u[c].children.push(...l.children||[])),u},{[A]:{props:{},children:[]}});return Object.entries(m).reduce((u,[l,{props:c,children:f}])=>(f.length&&(u[l]=(b={})=>{const g=fe(b,Object.keys(c||{}));let s=f.map((a,d)=>{var h;return ve(a,r,{documentMeta:o,parentScope:{...n,...g},resolveComponent:i},String(((h=a.props)==null?void 0:h.key)||d))});return c!=null&&c.unwrap&&(s=q(s,c.unwrap)),xe(s)}),u),{})}function _e(e,r,t,o={}){var u,l;const n={...t.runtimeData,...o,$document:t,$doc:t},i=/\.|\[(\d+)\]/,m=((u=e.props)==null?void 0:u.value.trim().split(i).filter(Boolean)).reduce((c,f)=>{if(c&&f in c)return typeof c[f]=="function"?c[f]():c[f]},n),p=(l=e.props)==null?void 0:l.defaultValue;return r(j,m??p??"")}function Pe(e,r){const{tag:t="",props:o={}}=e;return Object.keys(o).reduce(function(n,i){if(i==="__ignoreMap")return n;const y=o[i];if(me.test(i))return Ce(i,y,n,r,{native:ye.includes(t)});if(i==="v-bind")return Te(i,y,n,r);if($.test(i))return je(i,y,n,r);if(U.test(i))return Oe(i,y,n,r);const{attribute:m}=ue(le,i);return Array.isArray(y)&&y.every(p=>typeof p=="string")?(n[m]=y.join(" "),n):(n[m]=y,n)},{})}function Ce(e,r,t,o,{native:n}){var p;const i=((p=e.match(/^v-model:([^=]+)/))==null?void 0:p[1])||"modelValue",y=n?"value":i,m=n?"onInput":`onUpdate:${i}`;return t[y]=w(r,o.runtimeData),t[m]=u=>{var l;o.updateRuntimeData(r,n?(l=u.target)==null?void 0:l.value:u)},t}function Te(e,r,t,o){const n=w(r,o);return t=Object.assign(t,n),t}function je(e,r,t,o){return e=e.replace($,""),t.on=t.on||{},t.on[e]=()=>w(r,o),t}function Oe(e,r,t,o){return e=e.replace(U,""),t[e]=w(r,o),t}const B=e=>{if(typeof e=="string"){if(T.includes(e))return e;const r=L(C(e),!1);return!e||(r==null?void 0:r.name)==="AsyncComponentWrapper"||typeof r=="string"?r:"setup"in r?x(()=>new Promise(t=>t(r))):r}return e};function w(e,r){const t=e.split(".").reduce((o,n)=>typeof o=="object"?o[n]:void 0,r);return typeof t>"u"?te(e):t}function Se(e){let r="";for(const t of Object.keys(e.props||{}))if(!(!t.startsWith("#")&&!t.startsWith("v-slot:"))){r=t.split(/[:#]/,2)[1];break}return r||A}function we(e){return e.tag==="template"}function K(e){return he.includes(e)}function xe(e){const r=[];for(const t of e){const o=r[r.length-1];t.type===j&&(o==null?void 0:o.type)===j?o.children=o.children+t.children:r.push(t)}return r}async function Ae(e,r){if(!e)return;const t=Array.from(new Set(o(e,r)));await Promise.all(t.map(async n=>{if(n!=null&&n.render||n!=null&&n.ssrRender||n!=null&&n.__ssrInlineRender)return;const i=B(n);i!=null&&i.__asyncLoader&&!i.__asyncResolved&&await i.__asyncLoader()}));function o(n,i){const y=n.tag;if(n.type==="text"||y==="binding"||n.type==="comment")return[];const m=W(n,i.tags);if(K(m))return[];const p=[];n.type!=="root"&&!T.includes(m)&&p.push(m);for(const u of n.children||[])p.push(...o(u,i));return p}}function W(e,r){var o;const t=e.tag;return!t||typeof((o=e.props)==null?void 0:o.__ignoreMap)<"u"?t:r[t]||r[C(t)]||r[M(e.tag)]||t}const z=["ProseA","ProseBlockquote","ProseHr","ProseImg","Banner","Block","Box","BulletList","Card","Columns","ContactForm","Footer","Header","Image","Include","LinkButton","MarkdownFormat","People","Pr","PrList","Slider","SliderInner","Steps","Switcher","ProseCode","ProseEm","ProseH1","ProseH2","ProseH3","ProseH4","ProseH5","ProseH6","ProseLi","ProseOl","ProseP","ProsePre","ProseScript","ProseStrong","ProseTable","ProseTbody","ProseTd","ProseTh","ProseThead","ProseTr","ProseUl"],G=[],Be=Object.freeze(Object.defineProperty({__proto__:null,globalComponents:z,localComponents:G},Symbol.toStringTag,{value:"Module"})),Fe={__name:"ContentRenderer",props:{value:{type:Object,required:!0},excerpt:{type:Boolean,default:!1},tag:{type:String,default:"div"},components:{type:Object,default:()=>({})},data:{type:Object,default:()=>({})},prose:{type:Boolean,default:void 0},class:{type:[String,Object],default:void 0},unwrap:{type:[Boolean,String],default:!1}},setup(e){const r=["render","ssrRender","__ssrInlineRender"],t=e,o=!1,n=P(()=>{let s=t.value.body||t.value;return t.excerpt&&t.value.excerpt&&(s=t.value.excerpt),s.type==="minimal"||s.type==="minimark"?ce({value:s.value}):s}),i=P(()=>{var s,a;return!((a=(s=n.value)==null?void 0:s.children)!=null&&a.length)}),y=P(()=>{const{body:s,excerpt:a,...d}=t.value;return{...d,...t.data}}),m=Object.fromEntries(["p","a","blockquote","code","pre","code","em","h1","h2","h3","h4","h5","h6","hr","img","ul","ol","li","strong","table","thead","tbody","td","th","tr","script"].map(s=>[s,`prose-${s}`])),{mdc:p}=re().public||{},u=P(()=>{var s,a,d,h;return{...(s=p==null?void 0:p.components)!=null&&s.prose&&t.prose!==!1?m:{},...((a=p==null?void 0:p.components)==null?void 0:a.map)||{},...I(((h=(d=t.data)==null?void 0:d.mdc)==null?void 0:h.components)||{}),...t.components}}),l=P(()=>n.value?f(n.value,{tags:u.value}):{});function c(s){let a=s;if(typeof s=="string"){if(T.includes(s))return s;if(z.includes(C(s))?a=L(s,!1):G.includes(C(s))&&(a=x(()=>ae(()=>Promise.resolve().then(()=>Be),void 0,import.meta.url).then(v=>{const _=v[C(s)];return _?_():void 0}))),typeof a=="string")return a}if(!a)return a;const d=a;return"__asyncLoader"in d?d:"setup"in d?x(()=>Promise.resolve(d)):d}function f(s,a){if(!s)return;const d=Array.from(new Set(b(s,a))),h={};for(const[v,_]of d)if(!h[v]){if(typeof _=="object"&&r.some(J=>Object.hasOwnProperty.call(_,J))){h[v]=_;continue}h[v]=c(_)}return h}function b(s,a){const d=s.tag;if(s.type==="text"||d==="binding"||s.type==="comment")return[];const h=g(s,a.tags),v=[];s.type!=="root"&&!T.includes(h)&&v.push([d,h]);for(const _ of s.children||[])v.push(...b(_,a));return v}function g(s,a){var h;const d=s.tag;return!d||typeof((h=s.props)==null?void 0:h.__ignoreMap)<"u"?d:a[d]||a[C(d)]||a[M(s.tag)]||d}return(s,a)=>i.value?oe(s.$slots,"empty",{key:1,body:n.value,data:y.value,dataContentId:F(o)?e.value.id:void 0}):(se(),ne(be,{key:0,body:n.value,data:y.value,class:ie(t.class),tag:t.tag,prose:t.prose,unwrap:t.unwrap,components:l.value,"data-content-id":F(o)?e.value.id:void 0},null,8,["body","data","class","tag","prose","unwrap","components","data-content-id"]))}};export{Fe as _};
